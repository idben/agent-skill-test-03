<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dialog Replace Demo - Tailwind CSS æ¨£å¼</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <style>
    /* Dialog åŸºç¤æ¨£å¼ */
    dialog {
      border: none;
      border-radius: 0.5rem;
      padding: 0;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    dialog::backdrop {
      background: rgba(0, 0, 0, 0.5);
      animation: backdropFadeIn 0.3s ease;
    }

    /* å‹•ç•«è¨­å®š */
    dialog {
      --animate-duration: 0.3s;
    }

    dialog.dialog-closing::backdrop {
      animation: backdropFadeOut 0.3s ease forwards;
    }

    @keyframes backdropFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes backdropFadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    /* Alert é¡å‹æ¨£å¼ */
    dialog.alert-success .dialog-header { color: #16a34a; }
    dialog.alert-error .dialog-header { color: #dc2626; }
    dialog.alert-info .dialog-header { color: #2563eb; }

    /* Prompt éŒ¯èª¤æç¤º */
    dialog .error-message {
      display: none;
    }

    dialog .error-message.show {
      display: block;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen">
  <div class="container mx-auto px-4 py-10 max-w-4xl">
    <header class="text-center mb-10">
      <h1 class="text-4xl font-bold text-gray-800 mb-2">Dialog Replace Demo</h1>
      <p class="text-lg text-gray-500">ä½¿ç”¨åŸç”Ÿ HTML <code class="bg-gray-200 px-1 rounded">&lt;dialog&gt;</code> å–ä»£å‚³çµ± JavaScript å°è©±æ¡†</p>
    </header>

    <div class="grid md:grid-cols-2 gap-6">
      <!-- Alert å€å¡Š -->
      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-gray-50 border-b border-gray-200 px-4 py-3">
          <h5 class="font-semibold text-gray-800">Alert è¨Šæ¯æç¤º</h5>
        </div>
        <div class="p-4">
          <p class="text-gray-500 text-sm mb-3">å–ä»£ <code class="bg-gray-100 px-1 rounded">window.alert()</code>ï¼Œæ”¯æ´ä¸‰ç¨®è¨Šæ¯é¡å‹</p>
          <div class="flex flex-wrap gap-2">
            <button type="button" class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors" id="btnAlertSuccess">
              æˆåŠŸè¨Šæ¯
            </button>
            <button type="button" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md transition-colors" id="btnAlertError">
              éŒ¯èª¤è¨Šæ¯
            </button>
            <button type="button" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors" id="btnAlertInfo">
              ä¸€èˆ¬é€šçŸ¥
            </button>
          </div>
        </div>
      </div>

      <!-- Confirm å€å¡Š -->
      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-gray-50 border-b border-gray-200 px-4 py-3">
          <h5 class="font-semibold text-gray-800">Confirm ç¢ºèªå°è©±æ¡†</h5>
        </div>
        <div class="p-4">
          <p class="text-gray-500 text-sm mb-3">å–ä»£ <code class="bg-gray-100 px-1 rounded">window.confirm()</code>ï¼Œæ”¯æ´è‡ªå®šç¾©æŒ‰éˆ•</p>
          <div class="flex flex-wrap gap-2">
            <button type="button" class="px-4 py-2 border border-red-500 text-red-500 hover:bg-red-50 rounded-md transition-colors" id="btnConfirmDelete">
              åˆªé™¤ç¢ºèª
            </button>
            <button type="button" class="px-4 py-2 border border-yellow-500 text-yellow-600 hover:bg-yellow-50 rounded-md transition-colors" id="btnConfirmLeave">
              é›¢é–‹ç¢ºèª
            </button>
            <button type="button" class="px-4 py-2 border border-gray-400 text-gray-600 hover:bg-gray-50 rounded-md transition-colors" id="btnConfirmCustom">
              è‡ªå®šç¾©æŒ‰éˆ•
            </button>
          </div>
        </div>
      </div>

      <!-- Prompt å€å¡Š -->
      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-gray-50 border-b border-gray-200 px-4 py-3">
          <h5 class="font-semibold text-gray-800">Prompt è¼¸å…¥å°è©±æ¡†</h5>
        </div>
        <div class="p-4">
          <p class="text-gray-500 text-sm mb-3">å–ä»£ <code class="bg-gray-100 px-1 rounded">window.prompt()</code>ï¼Œæ”¯æ´é©—è­‰è¼¸å…¥</p>
          <div class="flex flex-wrap gap-2">
            <button type="button" class="px-4 py-2 border border-blue-500 text-blue-500 hover:bg-blue-50 rounded-md transition-colors" id="btnPromptSimple">
              ç°¡å–®è¼¸å…¥
            </button>
            <button type="button" class="px-4 py-2 border border-blue-500 text-blue-500 hover:bg-blue-50 rounded-md transition-colors" id="btnPromptDefault">
              é è¨­å€¼è¼¸å…¥
            </button>
            <button type="button" class="px-4 py-2 border border-blue-500 text-blue-500 hover:bg-blue-50 rounded-md transition-colors" id="btnPromptValidate">
              é©—è­‰è¼¸å…¥
            </button>
          </div>
        </div>
      </div>

      <!-- Dialog å€å¡Š -->
      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-gray-50 border-b border-gray-200 px-4 py-3">
          <h5 class="font-semibold text-gray-800">Dialog è‡ªå®šç¾©å°è©±æ¡†</h5>
        </div>
        <div class="p-4">
          <p class="text-gray-500 text-sm mb-3">é€²éšè‡ªå®šç¾©å°è©±æ¡†ï¼Œæ”¯æ´å¤šæŒ‰éˆ•èˆ‡è¤‡é›œå…§å®¹</p>
          <div class="flex flex-wrap gap-2">
            <button type="button" class="px-4 py-2 border border-gray-700 text-gray-700 hover:bg-gray-100 rounded-md transition-colors" id="btnDialogButtons">
              å¤šæŒ‰éˆ•é¸æ“‡
            </button>
            <button type="button" class="px-4 py-2 border border-gray-700 text-gray-700 hover:bg-gray-100 rounded-md transition-colors" id="btnDialogHtml">
              HTML å…§å®¹
            </button>
            <button type="button" class="px-4 py-2 border border-gray-700 text-gray-700 hover:bg-gray-100 rounded-md transition-colors" id="btnDialogList">
              æ¸…å–®é¸é …
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="text-center mt-10 text-gray-400">
      <small>Dialog Replace Skill - ä½¿ç”¨ Tailwind CSS æ¨£å¼</small>
    </footer>
  </div>

  <!-- Alert Dialog -->
  <dialog id="alertDialog" class="rounded-lg">
    <div class="dialog-header flex items-center gap-3 px-4 pt-4 pb-2">
      <span class="dialog-icon text-2xl"></span>
      <h6 class="dialog-title text-lg font-semibold">æç¤º</h6>
    </div>
    <div class="dialog-body px-4 pb-4">
      <p class="message text-gray-700"></p>
    </div>
    <div class="dialog-footer flex justify-end gap-2 px-4 py-3 bg-gray-50 border-t border-gray-200">
      <button type="button" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors" autofocus>ç¢ºå®š</button>
    </div>
  </dialog>

  <!-- Confirm Dialog -->
  <dialog id="confirmDialog" class="rounded-lg">
    <div class="dialog-header flex items-center gap-3 px-4 pt-4 pb-2">
      <span class="dialog-icon text-2xl">âš ï¸</span>
      <h6 class="dialog-title text-lg font-semibold text-gray-800">ç¢ºèª</h6>
    </div>
    <div class="dialog-body px-4 pb-4">
      <p class="message text-gray-700"></p>
    </div>
    <div class="dialog-footer flex justify-end gap-2 px-4 py-3 bg-gray-50 border-t border-gray-200">
      <button type="button" class="btn-cancel px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md transition-colors">å–æ¶ˆ</button>
      <button type="button" class="btn-confirm px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors" autofocus>ç¢ºå®š</button>
    </div>
  </dialog>

  <!-- Prompt Dialog -->
  <dialog id="promptDialog" class="rounded-lg">
    <form method="dialog">
      <div class="dialog-header flex items-center gap-3 px-4 pt-4 pb-2">
        <span class="dialog-icon text-2xl">âœï¸</span>
        <h6 class="dialog-title text-lg font-semibold text-gray-800">è¼¸å…¥</h6>
      </div>
      <div class="dialog-body px-4 pb-4">
        <label class="message block text-gray-700 mb-2"></label>
        <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" name="input" autofocus>
        <div class="error-message text-red-500 text-sm mt-1"></div>
      </div>
      <div class="dialog-footer flex justify-end gap-2 px-4 py-3 bg-gray-50 border-t border-gray-200">
        <button type="button" class="btn-cancel px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md transition-colors">å–æ¶ˆ</button>
        <button type="submit" class="btn-confirm px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors">ç¢ºå®š</button>
      </div>
    </form>
  </dialog>

  <!-- Custom Dialog -->
  <dialog id="customDialog" class="rounded-lg">
    <div class="dialog-header flex items-center gap-3 px-4 pt-4 pb-2">
      <span class="dialog-icon text-2xl"></span>
      <h6 class="dialog-title text-lg font-semibold text-gray-800"></h6>
    </div>
    <div class="dialog-body px-4 pb-4">
      <div class="dialog-content"></div>
    </div>
    <div class="dialog-footer flex justify-end gap-2 px-4 py-3 bg-gray-50 border-t border-gray-200"></div>
  </dialog>

  <script type="module">
    import {
      init,
      showAlert,
      showConfirm,
      showPrompt,
      showDialog
    } from './dialog-api.js';

    // Tailwind æŒ‰éˆ•æ¨£å¼å°ç…§
    const btnStyles = {
      primary: 'px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors',
      secondary: 'px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md transition-colors',
      danger: 'px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md transition-colors',
      success: 'px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors',
      warning: 'px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-md transition-colors',
      light: 'px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors'
    };

    // Tailwind é©é…å™¨
    const tailwindAdapter = {
      createButton: (text, style = 'secondary') => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = text;
        btn.className = btnStyles[style] || btnStyles.secondary;
        return btn;
      },
      setButtonStyle: (btn, style) => {
        btn.className = 'btn-confirm ' + (btnStyles[style] || btnStyles.primary);
      },
      getInputValue: (input) => input.value,
      setInputValue: (input, value) => { input.value = value; },
      setInputPlaceholder: (input, placeholder) => { input.placeholder = placeholder; },
      setInputLabel: (label, text) => { label.textContent = text; },
      focusInput: (input) => {
        input.focus();
        if (input.select) input.select();
      }
    };

    // åˆå§‹åŒ– DialogAPI
    init({
      dialogs: {
        alert: document.querySelector('#alertDialog'),
        confirm: document.querySelector('#confirmDialog'),
        prompt: document.querySelector('#promptDialog'),
        custom: document.querySelector('#customDialog')
      },
      adapter: tailwindAdapter
    });

    // ============================================
    // ç¤ºç¯„æŒ‰éˆ•äº‹ä»¶
    // ============================================

    // Alert ç¤ºç¯„
    document.querySelector('#btnAlertSuccess').addEventListener('click', async () => {
      await showAlert('æ“ä½œå·²æˆåŠŸå®Œæˆï¼', 'success');
    });

    document.querySelector('#btnAlertError').addEventListener('click', async () => {
      await showAlert('ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚', 'error');
    });

    document.querySelector('#btnAlertInfo').addEventListener('click', async () => {
      await showAlert('é€™æ˜¯ä¸€å‰‡ç³»çµ±é€šçŸ¥è¨Šæ¯ã€‚', 'info');
    });

    // Confirm ç¤ºç¯„
    document.querySelector('#btnConfirmDelete').addEventListener('click', async () => {
      const result = await showConfirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†è³‡æ–™å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚', {
        type: 'danger',
        confirmText: 'åˆªé™¤',
        cancelText: 'å–æ¶ˆ'
      });

      if (result) {
        await showAlert('è³‡æ–™å·²æˆåŠŸåˆªé™¤', 'success');
      } else {
        await showAlert('å·²å–æ¶ˆåˆªé™¤æ“ä½œ', 'info');
      }
    });

    document.querySelector('#btnConfirmLeave').addEventListener('click', async () => {
      const result = await showConfirm('æ‚¨æœ‰æœªå„²å­˜çš„è®Šæ›´ï¼Œç¢ºå®šè¦é›¢é–‹å—ï¼Ÿ', {
        confirmText: 'é›¢é–‹',
        cancelText: 'ç•™ä¸‹'
      });

      if (result) {
        await showAlert('æ‚¨å·²é¸æ“‡é›¢é–‹', 'info');
      } else {
        await showAlert('æ‚¨é¸æ“‡ç•™ä¸‹ç¹¼çºŒç·¨è¼¯', 'success');
      }
    });

    document.querySelector('#btnConfirmCustom').addEventListener('click', async () => {
      const result = await showConfirm('è¦ä½¿ç”¨æ·±è‰²æ¨¡å¼é‚„æ˜¯æ·ºè‰²æ¨¡å¼ï¼Ÿ', {
        confirmText: 'æ·±è‰²æ¨¡å¼',
        cancelText: 'æ·ºè‰²æ¨¡å¼'
      });

      if (result) {
        await showAlert('å·²åˆ‡æ›è‡³æ·±è‰²æ¨¡å¼', 'success');
      } else {
        await showAlert('å·²åˆ‡æ›è‡³æ·ºè‰²æ¨¡å¼', 'success');
      }
    });

    // Prompt ç¤ºç¯„
    document.querySelector('#btnPromptSimple').addEventListener('click', async () => {
      const name = await showPrompt('è«‹è¼¸å…¥æ‚¨çš„åå­—ï¼š');

      if (name) {
        await showAlert(`æ­¡è¿ï¼Œ${name}ï¼`, 'success');
      } else {
        await showAlert('æ‚¨å·²å–æ¶ˆè¼¸å…¥', 'info');
      }
    });

    document.querySelector('#btnPromptDefault').addEventListener('click', async () => {
      const nickname = await showPrompt('è«‹è¼¸å…¥æš±ç¨±ï¼š', {
        defaultValue: 'åŒ¿åä½¿ç”¨è€…'
      });

      if (nickname) {
        await showAlert(`æ‚¨çš„æš±ç¨±å·²è¨­å®šç‚ºï¼š${nickname}`, 'success');
      } else {
        await showAlert('æ‚¨å·²å–æ¶ˆè¨­å®šæš±ç¨±', 'info');
      }
    });

    document.querySelector('#btnPromptValidate').addEventListener('click', async () => {
      const email = await showPrompt('è«‹è¼¸å…¥ Emailï¼š', {
        placeholder: 'example@mail.com',
        validate: (value) => {
          if (!value) return 'è«‹è¼¸å…¥ Email';
          if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
            return 'Email æ ¼å¼ä¸æ­£ç¢º';
          }
          return null;
        }
      });

      if (email) {
        await showAlert(`Email å·²è¨­å®šï¼š${email}`, 'success');
      } else {
        await showAlert('æ‚¨å·²å–æ¶ˆè¼¸å…¥ Email', 'info');
      }
    });

    // Dialog ç¤ºç¯„
    document.querySelector('#btnDialogButtons').addEventListener('click', async () => {
      const action = await showDialog('è«‹é¸æ“‡æª”æ¡ˆè™•ç†æ–¹å¼ï¼š', {
        title: 'æª”æ¡ˆæ“ä½œ',
        icon: 'ğŸ“',
        buttons: [
          { text: 'ä¸‹è¼‰', value: 'download', style: 'primary' },
          { text: 'åˆ†äº«', value: 'share', style: 'secondary' },
          { text: 'åˆªé™¤', value: 'delete', style: 'danger' },
          { text: 'å–æ¶ˆ', value: 'cancel', style: 'light' }
        ]
      });

      const actionText = {
        download: 'ä¸‹è¼‰æª”æ¡ˆ',
        share: 'åˆ†äº«æª”æ¡ˆ',
        delete: 'åˆªé™¤æª”æ¡ˆ',
        cancel: 'å–æ¶ˆæ“ä½œ'
      };

      await showAlert(`æ‚¨é¸æ“‡äº†ï¼š${actionText[action] || action}`, 'info');
    });

    document.querySelector('#btnDialogHtml').addEventListener('click', async () => {
      const result = await showDialog({
        title: 'ç”¢å“ä»‹ç´¹',
        icon: 'ğŸ§',
        html: `
          <div class="text-center">
            <div class="bg-gray-100 rounded-lg p-6 mb-4">
              <span class="text-6xl">ğŸ§</span>
            </div>
            <h5 class="text-lg font-semibold mb-1">ç„¡ç·šè—ç‰™è€³æ©Ÿ Pro</h5>
            <p class="text-gray-500 text-sm mb-2">é«˜å“è³ªéŸ³æ•ˆï¼Œä¸»å‹•é™å™ªï¼ŒçºŒèˆª 24 å°æ™‚</p>
            <div class="flex justify-center gap-2 mb-2">
              <span class="px-2 py-1 bg-green-100 text-green-700 text-xs rounded">ç†±éŠ·</span>
              <span class="px-2 py-1 bg-yellow-100 text-yellow-700 text-xs rounded">é™æ™‚å„ªæƒ </span>
            </div>
            <p class="text-2xl font-bold text-blue-500">NT$ 1,299</p>
            <small class="text-gray-400 line-through">NT$ 1,999</small>
          </div>
        `,
        buttons: [
          { text: 'åŠ å…¥è³¼ç‰©è»Š', value: 'cart', style: 'primary' },
          { text: 'é—œé–‰', value: 'close', style: 'secondary' }
        ]
      });

      if (result === 'cart') {
        await showAlert('å·²åŠ å…¥è³¼ç‰©è»Šï¼', 'success');
      }
    });

    document.querySelector('#btnDialogList').addEventListener('click', async () => {
      const lang = await showDialog('è«‹é¸æ“‡èªè¨€ï¼š', {
        title: 'åˆ‡æ›èªè¨€',
        icon: 'ğŸŒ',
        type: 'list',
        options: [
          { text: 'ç¹é«”ä¸­æ–‡', value: 'zh-TW', icon: 'ğŸ‡¹ğŸ‡¼' },
          { text: 'English', value: 'en', icon: 'ğŸ‡ºğŸ‡¸' },
          { text: 'æ—¥æœ¬èª', value: 'ja', icon: 'ğŸ‡¯ğŸ‡µ' },
          { text: 'í•œêµ­ì–´', value: 'ko', icon: 'ğŸ‡°ğŸ‡·' }
        ]
      });

      if (lang) {
        const langNames = {
          'zh-TW': 'ç¹é«”ä¸­æ–‡',
          'en': 'English',
          'ja': 'æ—¥æœ¬èª',
          'ko': 'í•œêµ­ì–´'
        };
        await showAlert(`å·²åˆ‡æ›è‡³ï¼š${langNames[lang]}`, 'success');
      } else {
        await showAlert('å·²å–æ¶ˆåˆ‡æ›èªè¨€', 'info');
      }
    });

      </script>
</body>
</html>
