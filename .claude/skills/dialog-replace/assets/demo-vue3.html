<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue 3 Dialog 元件示範 - Shoelace</title>
  <!-- Shoelace -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/themes/light.css">
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/shoelace-autoloader.js"></script>
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    :root {
      --sl-color-primary-600: #0969da;
    }

    body {
      font-family: var(--sl-font-sans);
      background: var(--sl-color-neutral-100);
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2.5rem 1rem;
    }

    header {
      text-align: center;
      margin-bottom: 2.5rem;
    }

    header h1 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--sl-color-neutral-900);
      margin: 0 0 0.5rem;
    }

    header p {
      font-size: 1.125rem;
      color: var(--sl-color-neutral-500);
      margin: 0 0 1rem;
    }

    .badge-group {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
    }

    .demo-section {
      margin-bottom: 1.5rem;
    }

    .demo-section sl-card::part(body) {
      padding: 1.25rem;
    }

    .section-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--sl-color-neutral-700);
      margin: 0 0 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 2px solid var(--sl-color-neutral-200);
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .result-display {
      background: var(--sl-color-neutral-100);
      border-radius: var(--sl-border-radius-medium);
      padding: 0.75rem 1rem;
      font-family: var(--sl-font-mono);
      font-size: 0.875rem;
      color: var(--sl-color-neutral-700);
    }

    /* Dialog 基礎樣式 */
    .dialog-container {
      border: none;
      border-radius: var(--sl-border-radius-large);
      padding: 0;
      max-width: 420px;
      width: 90%;
      box-shadow: var(--sl-shadow-x-large);
      background: var(--sl-color-neutral-0);
      --animate-duration: 0.3s;
    }

    .dialog-container::backdrop {
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(2px);
    }

    .dialog-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1.25rem 1.25rem 0.75rem;
    }

    .dialog-icon {
      font-size: 1.5rem;
    }

    .dialog-title {
      margin: 0;
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--sl-color-neutral-900);
    }

    .dialog-body {
      padding: 0.5rem 1.25rem 1.25rem;
    }

    .dialog-body .message {
      margin: 0;
      color: var(--sl-color-neutral-700);
      line-height: 1.5;
    }

    .dialog-footer {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
      padding: 1rem 1.25rem;
      background: var(--sl-color-neutral-50);
      border-top: 1px solid var(--sl-color-neutral-200);
      border-radius: 0 0 var(--sl-border-radius-large) var(--sl-border-radius-large);
    }

    /* Alert 類型樣式 */
    .alert-success .dialog-header { color: var(--sl-color-success-600); }
    .alert-error .dialog-header { color: var(--sl-color-danger-600); }
    .alert-info .dialog-header { color: var(--sl-color-primary-600); }

    /* 錯誤訊息 */
    .error-message {
      color: var(--sl-color-danger-600);
      font-size: 0.875rem;
      margin-top: 0.5rem;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    /* 清單樣式 */
    .list-container {
      border: 1px solid var(--sl-color-neutral-200);
      border-radius: var(--sl-border-radius-medium);
      overflow: hidden;
    }

    .list-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      width: 100%;
      padding: 0.875rem 1rem;
      background: var(--sl-color-neutral-0);
      border: none;
      border-bottom: 1px solid var(--sl-color-neutral-200);
      cursor: pointer;
      text-align: left;
      font-family: inherit;
      font-size: 1rem;
      color: var(--sl-color-neutral-700);
      transition: background 0.2s;
    }

    .list-item:last-child {
      border-bottom: none;
    }

    .list-item:hover {
      background: var(--sl-color-neutral-100);
    }

    .list-icon {
      font-size: 1.25rem;
    }

    /* Prompt 輸入框調整 */
    .prompt-input {
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="container">
      <header>
        <h1>Vue 3 Dialog 元件</h1>
        <p>使用 Composition API 建立的原生 Dialog 元件</p>
        <div class="badge-group">
          <sl-badge variant="success">Vue 3</sl-badge>
          <sl-badge variant="primary">Shoelace</sl-badge>
          <sl-badge variant="neutral">Animate.css</sl-badge>
        </div>
      </header>

      <!-- Alert 示範 -->
      <div class="demo-section">
        <sl-card>
          <div class="section-title">Alert 訊息對話框</div>
          <div class="button-group">
            <sl-button variant="success" @click="demoAlertSuccess">成功訊息</sl-button>
            <sl-button variant="danger" @click="demoAlertError">錯誤訊息</sl-button>
            <sl-button variant="primary" @click="demoAlertInfo">一般通知</sl-button>
          </div>
        </sl-card>
      </div>

      <!-- Confirm 示範 -->
      <div class="demo-section">
        <sl-card>
          <div class="section-title">Confirm 確認對話框</div>
          <div class="button-group">
            <sl-button variant="danger" outline @click="demoConfirmDelete">刪除確認</sl-button>
            <sl-button variant="warning" outline @click="demoConfirmLeave">離開確認</sl-button>
            <sl-button variant="primary" outline @click="demoConfirmCustom">自定義按鈕</sl-button>
          </div>
          <div class="result-display">結果：{{ confirmResult }}</div>
        </sl-card>
      </div>

      <!-- Prompt 示範 -->
      <div class="demo-section">
        <sl-card>
          <div class="section-title">Prompt 輸入對話框</div>
          <div class="button-group">
            <sl-button variant="neutral" outline @click="demoPromptSimple">簡單輸入</sl-button>
            <sl-button variant="neutral" outline @click="demoPromptDefault">預設值輸入</sl-button>
            <sl-button variant="neutral" outline @click="demoPromptValidate">驗證輸入</sl-button>
          </div>
          <div class="result-display">輸入值：{{ promptResult }}</div>
        </sl-card>
      </div>

      <!-- Custom Dialog 示範 -->
      <div class="demo-section">
        <sl-card>
          <div class="section-title">Custom 自定義對話框</div>
          <div class="button-group">
            <sl-button variant="neutral" outline @click="demoDialogButtons">多按鈕選擇</sl-button>
            <sl-button variant="neutral" outline @click="demoDialogHtml">HTML 內容</sl-button>
            <sl-button variant="neutral" outline @click="demoDialogList">清單選項</sl-button>
          </div>
          <div class="result-display">選擇：{{ dialogResult }}</div>
        </sl-card>
      </div>

      <!-- Dialog Container 元件 -->
      <dialog-container
        :is-open="dialog.isOpen.value"
        :dialog-type="dialog.dialogType.value"
        :config="dialog.config"
        :animation-class="dialog.animationClass.value"
        :is-closing="dialog.isClosing.value"
        @alert-ok="dialog.handleAlertOk"
        @confirm-cancel="dialog.handleConfirmCancel"
        @confirm-ok="dialog.handleConfirmOk"
        @prompt-cancel="dialog.handlePromptCancel"
        @prompt-ok="dialog.handlePromptOk"
        @input-change="dialog.handleInputChange"
        @button-click="dialog.handleButtonClick"
        @list-item-click="dialog.handleListItemClick"
        @custom-cancel="dialog.handleCustomCancel"
      ></dialog-container>
    </div>
  </div>

  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

  <script>
    const { ref, reactive, readonly, watch, nextTick, h, Teleport } = Vue;

    // Shoelace 按鈕 variant 對照
    const btnVariants = {
      primary: 'primary',
      secondary: 'neutral',
      danger: 'danger',
      success: 'success',
      warning: 'warning',
      light: 'neutral'
    };

    const alertConfig = {
      success: { icon: '', title: '成功', class: 'alert-success' },
      error: { icon: '', title: '錯誤', class: 'alert-error' },
      info: { icon: '', title: '通知', class: 'alert-info' }
    };

    const DialogType = {
      ALERT: 'alert',
      CONFIRM: 'confirm',
      PROMPT: 'prompt',
      CUSTOM: 'custom'
    };

    function useDialog() {
      const isOpen = ref(false);
      const dialogType = ref(DialogType.ALERT);
      const animationClass = ref('');
      const isClosing = ref(false);

      const config = reactive({
        title: '',
        icon: '',
        message: '',
        alertType: 'info',
        confirmText: '確定',
        cancelText: '取消',
        isDanger: false,
        inputValue: '',
        placeholder: '',
        defaultValue: '',
        validate: null,
        errorMessage: '',
        html: '',
        buttons: [],
        listOptions: [],
        isListMode: false
      });

      let resolvePromise = null;

      const resetConfig = () => {
        config.title = '';
        config.icon = '';
        config.message = '';
        config.alertType = 'info';
        config.confirmText = '確定';
        config.cancelText = '取消';
        config.isDanger = false;
        config.inputValue = '';
        config.placeholder = '';
        config.defaultValue = '';
        config.validate = null;
        config.errorMessage = '';
        config.html = '';
        config.buttons = [];
        config.listOptions = [];
        config.isListMode = false;
      };

      const openDialog = (type, animation = 'zoomIn') => {
        dialogType.value = type;
        animationClass.value = 'animate__animated animate__' + animation;
        isClosing.value = false;
        isOpen.value = true;
      };

      const closeDialog = (result, animation = 'zoomOut') => {
        isClosing.value = true;
        animationClass.value = 'animate__animated animate__' + animation;

        setTimeout(function() {
          isOpen.value = false;
          isClosing.value = false;
          animationClass.value = '';
          if (resolvePromise) resolvePromise(result);
          resolvePromise = null;
        }, 300);
      };

      const showAlert = (message, type) => {
        type = type || 'info';
        resetConfig();
        const alertCfg = alertConfig[type] || alertConfig.info;
        config.title = alertCfg.title;
        config.icon = alertCfg.icon;
        config.message = message;
        config.alertType = type;
        openDialog(DialogType.ALERT, 'fadeInDown');
        return new Promise(function(resolve) { resolvePromise = resolve; });
      };

      const showConfirm = (message, options) => {
        options = options || {};
        resetConfig();
        var type = options.type || 'default';
        var confirmText = options.confirmText || '確定';
        var cancelText = options.cancelText || '取消';
        config.title = '確認';
        config.icon = '';
        config.message = message;
        config.confirmText = confirmText;
        config.cancelText = cancelText;
        config.isDanger = type === 'danger';
        openDialog(DialogType.CONFIRM, 'zoomIn');
        return new Promise(function(resolve) { resolvePromise = resolve; });
      };

      const showPrompt = (message, options) => {
        options = options || {};
        resetConfig();
        var defaultValue = options.defaultValue || '';
        var placeholder = options.placeholder || '';
        var validate = options.validate || null;
        config.title = '輸入';
        config.icon = '';
        config.message = message;
        config.inputValue = defaultValue;
        config.defaultValue = defaultValue;
        config.placeholder = placeholder;
        config.validate = validate;
        config.errorMessage = '';
        openDialog(DialogType.PROMPT, 'fadeInDown');
        return new Promise(function(resolve) { resolvePromise = resolve; });
      };

      const showDialog = (messageOrConfig, options) => {
        options = options || {};
        resetConfig();
        var dialogConfig = {};
        if (typeof messageOrConfig === 'string') {
          dialogConfig = Object.assign({ message: messageOrConfig }, options);
        } else {
          dialogConfig = messageOrConfig;
        }

        var title = dialogConfig.title || '對話框';
        var icon = dialogConfig.icon || '';
        var message = dialogConfig.message || '';
        var html = dialogConfig.html || '';
        var buttons = dialogConfig.buttons || [];
        var type = dialogConfig.type || 'default';
        var listOptions = dialogConfig.options || [];

        config.title = title;
        config.icon = icon;
        config.message = message;
        config.html = html;
        config.buttons = buttons;
        config.listOptions = listOptions;
        config.isListMode = type === 'list' && listOptions.length > 0;

        openDialog(DialogType.CUSTOM, 'fadeIn');
        return new Promise(function(resolve) { resolvePromise = resolve; });
      };

      const handleAlertOk = () => closeDialog(undefined, 'fadeOutUp');
      const handleConfirmCancel = () => closeDialog(false, 'zoomOut');
      const handleConfirmOk = () => closeDialog(true, 'zoomOut');
      const handlePromptCancel = () => closeDialog(null, 'fadeOutUp');

      const handlePromptOk = () => {
        if (config.validate) {
          var error = config.validate(config.inputValue);
          if (error) {
            config.errorMessage = error;
            return;
          }
        }
        closeDialog(config.inputValue, 'fadeOutUp');
      };

      const handleInputChange = (value) => {
        config.inputValue = value;
        config.errorMessage = '';
      };

      const handleButtonClick = (value) => closeDialog(value, 'fadeOut');
      const handleListItemClick = (value) => closeDialog(value, 'fadeOut');
      const handleCustomCancel = () => closeDialog(null, 'fadeOut');

      return {
        isOpen: readonly(isOpen),
        dialogType: readonly(dialogType),
        config: readonly(config),
        animationClass: readonly(animationClass),
        isClosing: readonly(isClosing),
        showAlert,
        showConfirm,
        showPrompt,
        showDialog,
        handleAlertOk,
        handleConfirmCancel,
        handleConfirmOk,
        handlePromptCancel,
        handlePromptOk,
        handleInputChange,
        handleButtonClick,
        handleListItemClick,
        handleCustomCancel
      };
    }

    // DialogContainer Component (Shoelace 版本)
    const DialogContainer = {
      name: 'DialogContainer',
      props: {
        isOpen: { type: Boolean, default: false },
        dialogType: { type: String, default: DialogType.ALERT },
        config: { type: Object, default: () => ({}) },
        animationClass: { type: String, default: '' },
        isClosing: { type: Boolean, default: false }
      },
      emits: [
        'alert-ok', 'confirm-cancel', 'confirm-ok',
        'prompt-cancel', 'prompt-ok', 'input-change',
        'button-click', 'list-item-click', 'custom-cancel'
      ],
      setup(props, { emit }) {
        const dialogRef = ref(null);
        const inputRef = ref(null);

        watch(() => props.isOpen, async (newVal) => {
          await nextTick();
          if (newVal && dialogRef.value) {
            dialogRef.value.showModal();
            if (props.dialogType === DialogType.PROMPT && inputRef.value) {
              setTimeout(function() {
                if (inputRef.value) {
                  inputRef.value.focus();
                  if (inputRef.value.select) inputRef.value.select();
                }
              }, 100);
            }
          } else if (!newVal && dialogRef.value) {
            dialogRef.value.close();
          }
        });

        const handleCancel = (e) => e.preventDefault();
        const handleSubmit = (e) => {
          e.preventDefault();
          emit('prompt-ok');
        };

        return { dialogRef, inputRef, handleCancel, handleSubmit };
      },
      render() {
        const { isOpen, dialogType, config, animationClass, isClosing } = this.$props;
        if (!isOpen) return null;

        const alertTypeClass = config.alertType ? 'alert-' + config.alertType : '';
        let dialogContent;

        switch (dialogType) {
          case DialogType.ALERT:
            dialogContent = this.renderAlert();
            break;
          case DialogType.CONFIRM:
            dialogContent = this.renderConfirm();
            break;
          case DialogType.PROMPT:
            dialogContent = this.renderPrompt();
            break;
          case DialogType.CUSTOM:
            dialogContent = this.renderCustom();
            break;
          default:
            dialogContent = null;
        }

        return h(Teleport, { to: 'body' }, [
          h('dialog', {
            ref: 'dialogRef',
            class: ['dialog-container', alertTypeClass, animationClass, { 'dialog-closing': isClosing }],
            onCancel: this.handleCancel
          }, dialogContent)
        ]);
      },
      methods: {
        createButton(text, variant, onClick) {
          return h('sl-button', {
            variant: btnVariants[variant] || 'neutral',
            onClick: onClick
          }, text);
        },
        renderAlert() {
          const { config } = this.$props;
          return [
            h('div', { class: 'dialog-header' }, [
              h('span', { class: 'dialog-icon' }, config.icon),
              h('h6', { class: 'dialog-title' }, config.title)
            ]),
            h('div', { class: 'dialog-body' }, [
              h('p', { class: 'message' }, config.message)
            ]),
            h('div', { class: 'dialog-footer' }, [
              h('sl-button', {
                variant: 'primary',
                onClick: () => this.$emit('alert-ok')
              }, '確定')
            ])
          ];
        },
        renderConfirm() {
          const { config } = this.$props;
          return [
            h('div', { class: 'dialog-header' }, [
              h('span', { class: 'dialog-icon' }, config.icon),
              h('h6', { class: 'dialog-title' }, config.title)
            ]),
            h('div', { class: 'dialog-body' }, [
              h('p', { class: 'message' }, config.message)
            ]),
            h('div', { class: 'dialog-footer' }, [
              h('sl-button', {
                variant: 'neutral',
                onClick: () => this.$emit('confirm-cancel')
              }, config.cancelText),
              h('sl-button', {
                variant: config.isDanger ? 'danger' : 'primary',
                onClick: () => this.$emit('confirm-ok')
              }, config.confirmText)
            ])
          ];
        },
        renderPrompt() {
          const { config } = this.$props;
          return [
            h('form', { onSubmit: this.handleSubmit }, [
              h('div', { class: 'dialog-header' }, [
                h('span', { class: 'dialog-icon' }, config.icon),
                h('h6', { class: 'dialog-title' }, config.title)
              ]),
              h('div', { class: 'dialog-body' }, [
                h('sl-input', {
                  ref: 'inputRef',
                  class: 'prompt-input',
                  label: config.message,
                  value: config.inputValue,
                  placeholder: config.placeholder,
                  onSlInput: (e) => this.$emit('input-change', e.target.value)
                }),
                config.errorMessage
                  ? h('div', { class: 'error-message show' }, config.errorMessage)
                  : null
              ]),
              h('div', { class: 'dialog-footer' }, [
                h('sl-button', {
                  variant: 'neutral',
                  onClick: () => this.$emit('prompt-cancel')
                }, config.cancelText),
                h('sl-button', {
                  variant: 'primary',
                  type: 'submit'
                }, config.confirmText)
              ])
            ])
          ];
        },
        renderCustom() {
          const { config } = this.$props;

          if (config.isListMode) {
            return [
              h('div', { class: 'dialog-header' }, [
                h('span', { class: 'dialog-icon' }, config.icon),
                h('h6', { class: 'dialog-title' }, config.title)
              ]),
              h('div', { class: 'dialog-body' }, [
                config.message ? h('p', { class: 'message', style: 'margin-bottom: 1rem;' }, config.message) : null,
                h('div', { class: 'list-container' },
                  config.listOptions.map(function(opt) {
                    return h('button', {
                      type: 'button',
                      class: 'list-item',
                      onClick: () => this.$emit('list-item-click', opt.value)
                    }, [
                      opt.icon ? h('span', { class: 'list-icon' }, opt.icon) : null,
                      h('span', null, opt.text)
                    ]);
                  }.bind(this))
                )
              ]),
              h('div', { class: 'dialog-footer' }, [
                h('sl-button', {
                  variant: 'neutral',
                  onClick: () => this.$emit('custom-cancel')
                }, '取消')
              ])
            ];
          }

          return [
            h('div', { class: 'dialog-header' }, [
              h('span', { class: 'dialog-icon' }, config.icon),
              h('h6', { class: 'dialog-title' }, config.title)
            ]),
            h('div', { class: 'dialog-body' }, [
              config.html
                ? h('div', { innerHTML: config.html })
                : h('p', { class: 'message' }, config.message)
            ]),
            h('div', { class: 'dialog-footer' },
              config.buttons.length > 0
                ? config.buttons.map(function(btn) {
                    return h('sl-button', {
                      variant: btnVariants[btn.style] || 'neutral',
                      onClick: () => this.$emit('button-click', btn.value)
                    }, btn.text);
                  }.bind(this))
                : [
                    h('sl-button', {
                      variant: 'primary',
                      onClick: () => this.$emit('button-click', 'ok')
                    }, '確定')
                  ]
            )
          ];
        }
      }
    };

    // Vue App
    const app = Vue.createApp({
      components: { DialogContainer },
      setup() {
        const dialog = useDialog();

        const confirmResult = ref('尚未選擇');
        const promptResult = ref('尚未輸入');
        const dialogResult = ref('尚未選擇');

        const demoAlertSuccess = function() {
          dialog.showAlert('操作已成功完成！', 'success');
        };

        const demoAlertError = function() {
          dialog.showAlert('發生錯誤，請稍後再試。', 'error');
        };

        const demoAlertInfo = function() {
          dialog.showAlert('這是一則系統通知訊息。', 'info');
        };

        const demoConfirmDelete = async function() {
          const result = await dialog.showConfirm(
            '確定要刪除這個項目嗎？此操作無法復原。',
            { type: 'danger', confirmText: '刪除', cancelText: '取消' }
          );
          confirmResult.value = result ? '已確認刪除' : '已取消';
          await dialog.showAlert(
            result ? '項目已刪除' : '已取消刪除操作',
            result ? 'success' : 'info'
          );
        };

        const demoConfirmLeave = async function() {
          const result = await dialog.showConfirm(
            '您有未儲存的變更，確定要離開嗎？',
            { confirmText: '離開', cancelText: '留下' }
          );
          confirmResult.value = result ? '選擇離開' : '選擇留下';
          await dialog.showAlert(
            result ? '已離開頁面' : '繼續編輯',
            result ? 'info' : 'success'
          );
        };

        const demoConfirmCustom = async function() {
          const result = await dialog.showConfirm(
            '您要儲存這份文件嗎？',
            { confirmText: '儲存', cancelText: '不儲存' }
          );
          confirmResult.value = result ? '已儲存' : '不儲存';
          await dialog.showAlert(
            result ? '文件已儲存' : '文件未儲存',
            result ? 'success' : 'info'
          );
        };

        const demoPromptSimple = async function() {
          const result = await dialog.showPrompt('請輸入您的名字：');
          promptResult.value = result !== null ? '"' + result + '"' : '已取消';
          if (result !== null) {
            await dialog.showAlert('您好，' + result + '！', 'success');
          }
        };

        const demoPromptDefault = async function() {
          const result = await dialog.showPrompt('請輸入專案名稱：', {
            defaultValue: 'my-project',
            placeholder: '輸入專案名稱'
          });
          promptResult.value = result !== null ? '"' + result + '"' : '已取消';
          if (result !== null) {
            await dialog.showAlert('專案「' + result + '」已建立！', 'success');
          }
        };

        const demoPromptValidate = async function() {
          const result = await dialog.showPrompt('請輸入 Email：', {
            placeholder: 'example@mail.com',
            validate: function(value) {
              if (!value) return '請輸入 Email';
              if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
                return '請輸入有效的 Email 格式';
              }
              return null;
            }
          });
          promptResult.value = result !== null ? '"' + result + '"' : '已取消';
          if (result !== null) {
            await dialog.showAlert('Email 已設定為 ' + result, 'success');
          }
        };

        const demoDialogButtons = async function() {
          const result = await dialog.showDialog({
            title: '選擇操作',
            icon: '',
            message: '請選擇要執行的操作：',
            buttons: [
              { text: '儲存', value: 'save', style: 'primary' },
              { text: '另存新檔', value: 'save-as', style: 'secondary' },
              { text: '取消', value: 'cancel', style: 'light' }
            ]
          });
          dialogResult.value = result !== null ? '選擇了「' + result + '」' : '已取消';
        };

        const demoDialogHtml = async function() {
          const result = await dialog.showDialog({
            title: '產品資訊',
            icon: '',
            html: '<div style="text-align: center;">' +
              '<div style="background: var(--sl-color-neutral-100); border-radius: var(--sl-border-radius-large); padding: 1.5rem; margin-bottom: 1rem;">' +
              '<span style="font-size: 2.5rem;">Headphones</span>' +
              '</div>' +
              '<h5 style="margin: 0 0 0.25rem; font-size: 1.125rem; font-weight: 600;">無線藍牙耳機 Pro</h5>' +
              '<p style="color: var(--sl-color-neutral-500); font-size: 0.875rem; margin: 0 0 0.5rem;">高品質音效，主動降噪，續航 24 小時</p>' +
              '<div style="display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 0.5rem;">' +
              '<sl-badge variant="success">熱銷</sl-badge>' +
              '<sl-badge variant="warning">限時優惠</sl-badge>' +
              '</div>' +
              '<p style="font-size: 1.5rem; font-weight: 700; color: var(--sl-color-primary-600); margin: 0;">NT$ 1,299</p>' +
              '<small style="color: var(--sl-color-neutral-400); text-decoration: line-through;">NT$ 1,999</small>' +
              '</div>',
            buttons: [
              { text: '立即購買', value: 'buy', style: 'success' },
              { text: '加入購物車', value: 'cart', style: 'primary' },
              { text: '關閉', value: 'close', style: 'secondary' }
            ]
          });
          dialogResult.value = result !== null ? '選擇了「' + result + '」' : '已關閉';
        };

        const demoDialogList = async function() {
          const result = await dialog.showDialog({
            title: '選擇語言',
            icon: '',
            message: '請選擇介面語言：',
            type: 'list',
            options: [
              { text: '繁體中文', value: 'zh-TW' },
              { text: 'English', value: 'en' },
              { text: '日本語', value: 'ja' },
              { text: '한국어', value: 'ko' }
            ]
          });
          dialogResult.value = result !== null ? '選擇了「' + result + '」' : '已取消';
          if (result !== null) {
            await dialog.showAlert('語言已切換為 ' + result, 'success');
          }
        };

        return {
          dialog,
          confirmResult,
          promptResult,
          dialogResult,
          demoAlertSuccess,
          demoAlertError,
          demoAlertInfo,
          demoConfirmDelete,
          demoConfirmLeave,
          demoConfirmCustom,
          demoPromptSimple,
          demoPromptDefault,
          demoPromptValidate,
          demoDialogButtons,
          demoDialogHtml,
          demoDialogList
        };
      }
    });

    app.mount('#app');
  </script>
</body>
</html>
