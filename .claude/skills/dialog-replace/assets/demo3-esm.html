<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dialog Replace Demo - Shoelace æ¨£å¼</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/themes/light.css">
  <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/shoelace-autoloader.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <style>
    :root {
      --sl-color-primary-600: #0969da;
    }

    body {
      font-family: var(--sl-font-sans);
      background: var(--sl-color-neutral-100);
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2.5rem 1rem;
    }

    header {
      text-align: center;
      margin-bottom: 2.5rem;
    }

    header h1 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--sl-color-neutral-900);
      margin: 0 0 0.5rem;
    }

    header p {
      font-size: 1.125rem;
      color: var(--sl-color-neutral-500);
      margin: 0;
    }

    header code {
      background: var(--sl-color-neutral-200);
      padding: 0.125rem 0.375rem;
      border-radius: var(--sl-border-radius-small);
      font-size: 0.875em;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      gap: 1.5rem;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    footer {
      text-align: center;
      margin-top: 2.5rem;
      color: var(--sl-color-neutral-400);
      font-size: 0.875rem;
    }

    /* Dialog åŸºç¤æ¨£å¼ */
    dialog {
      border: none;
      border-radius: var(--sl-border-radius-large);
      padding: 0;
      max-width: 400px;
      width: 90%;
      box-shadow: var(--sl-shadow-x-large);
      background: var(--sl-color-neutral-0);
    }

    dialog::backdrop {
      background: rgba(0, 0, 0, 0.5);
      animation: backdropFadeIn 0.3s ease;
    }

    dialog {
      --animate-duration: 0.3s;
    }

    dialog.dialog-closing::backdrop {
      animation: backdropFadeOut 0.3s ease forwards;
    }

    @keyframes backdropFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes backdropFadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    dialog .dialog-header {
      display: flex;
      align-items: center;
      padding: 1.25rem 1.25rem 0.75rem;
      gap: 0.75rem;
    }

    dialog .dialog-header .dialog-icon {
      font-size: 1.5rem;
      line-height: 1;
    }

    dialog .dialog-header .dialog-title {
      margin: 0;
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--sl-color-neutral-900);
    }

    dialog .dialog-body {
      padding: 0.5rem 1.25rem 1.25rem;
    }

    dialog .dialog-body .message {
      margin: 0;
      color: var(--sl-color-neutral-700);
      line-height: 1.5;
    }

    dialog .dialog-footer {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
      padding: 1rem 1.25rem;
      background: var(--sl-color-neutral-50);
      border-top: 1px solid var(--sl-color-neutral-200);
      border-radius: 0 0 var(--sl-border-radius-large) var(--sl-border-radius-large);
    }

    /* Alert é¡å‹æ¨£å¼ */
    dialog.alert-success .dialog-header { color: var(--sl-color-success-600); }
    dialog.alert-error .dialog-header { color: var(--sl-color-danger-600); }
    dialog.alert-info .dialog-header { color: var(--sl-color-primary-600); }

    /* Prompt éŒ¯èª¤æç¤º */
    dialog .error-message {
      color: var(--sl-color-danger-600);
      font-size: 0.875rem;
      margin-top: 0.5rem;
      display: none;
    }

    dialog .error-message.show {
      display: block;
    }

    /* Dialog æ¸…å–®æ¨£å¼ */
    .list-container {
      border: 1px solid var(--sl-color-neutral-200);
      border-radius: var(--sl-border-radius-medium);
      overflow: hidden;
    }

    .list-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      width: 100%;
      padding: 0.875rem 1rem;
      background: var(--sl-color-neutral-0);
      border: none;
      border-bottom: 1px solid var(--sl-color-neutral-200);
      cursor: pointer;
      text-align: left;
      font-family: inherit;
      font-size: 1rem;
      color: var(--sl-color-neutral-700);
      transition: background 0.2s;
    }

    .list-item:last-child {
      border-bottom: none;
    }

    .list-item:hover {
      background: var(--sl-color-neutral-100);
    }

    .list-item .list-icon {
      font-size: 1.25rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Dialog Replace Demo</h1>
      <p>ä½¿ç”¨åŸç”Ÿ HTML <code>&lt;dialog&gt;</code> å–ä»£å‚³çµ± JavaScript å°è©±æ¡†</p>
    </header>

    <div class="grid">
      <!-- Alert å€å¡Š -->
      <sl-card>
        <div slot="header">
          <strong>Alert è¨Šæ¯æç¤º</strong>
        </div>
        <p style="color: var(--sl-color-neutral-500); font-size: 0.875rem; margin: 0 0 1rem;">
          å–ä»£ <code>window.alert()</code>ï¼Œæ”¯æ´ä¸‰ç¨®è¨Šæ¯é¡å‹
        </p>
        <div class="button-group">
          <sl-button variant="success" id="btnAlertSuccess">æˆåŠŸè¨Šæ¯</sl-button>
          <sl-button variant="danger" id="btnAlertError">éŒ¯èª¤è¨Šæ¯</sl-button>
          <sl-button variant="primary" id="btnAlertInfo">ä¸€èˆ¬é€šçŸ¥</sl-button>
        </div>
      </sl-card>

      <!-- Confirm å€å¡Š -->
      <sl-card>
        <div slot="header">
          <strong>Confirm ç¢ºèªå°è©±æ¡†</strong>
        </div>
        <p style="color: var(--sl-color-neutral-500); font-size: 0.875rem; margin: 0 0 1rem;">
          å–ä»£ <code>window.confirm()</code>ï¼Œæ”¯æ´è‡ªå®šç¾©æŒ‰éˆ•
        </p>
        <div class="button-group">
          <sl-button variant="danger" outline id="btnConfirmDelete">åˆªé™¤ç¢ºèª</sl-button>
          <sl-button variant="warning" outline id="btnConfirmLeave">é›¢é–‹ç¢ºèª</sl-button>
          <sl-button variant="neutral" outline id="btnConfirmCustom">è‡ªå®šç¾©æŒ‰éˆ•</sl-button>
        </div>
      </sl-card>

      <!-- Prompt å€å¡Š -->
      <sl-card>
        <div slot="header">
          <strong>Prompt è¼¸å…¥å°è©±æ¡†</strong>
        </div>
        <p style="color: var(--sl-color-neutral-500); font-size: 0.875rem; margin: 0 0 1rem;">
          å–ä»£ <code>window.prompt()</code>ï¼Œæ”¯æ´é©—è­‰è¼¸å…¥
        </p>
        <div class="button-group">
          <sl-button variant="primary" outline id="btnPromptSimple">ç°¡å–®è¼¸å…¥</sl-button>
          <sl-button variant="primary" outline id="btnPromptDefault">é è¨­å€¼è¼¸å…¥</sl-button>
          <sl-button variant="primary" outline id="btnPromptValidate">é©—è­‰è¼¸å…¥</sl-button>
        </div>
      </sl-card>

      <!-- Dialog å€å¡Š -->
      <sl-card>
        <div slot="header">
          <strong>Dialog è‡ªå®šç¾©å°è©±æ¡†</strong>
        </div>
        <p style="color: var(--sl-color-neutral-500); font-size: 0.875rem; margin: 0 0 1rem;">
          é€²éšè‡ªå®šç¾©å°è©±æ¡†ï¼Œæ”¯æ´å¤šæŒ‰éˆ•èˆ‡è¤‡é›œå…§å®¹
        </p>
        <div class="button-group">
          <sl-button variant="neutral" outline id="btnDialogButtons">å¤šæŒ‰éˆ•é¸æ“‡</sl-button>
          <sl-button variant="neutral" outline id="btnDialogHtml">HTML å…§å®¹</sl-button>
          <sl-button variant="neutral" outline id="btnDialogList">æ¸…å–®é¸é …</sl-button>
        </div>
      </sl-card>
    </div>

    <footer>
      Dialog Replace Skill - ä½¿ç”¨ Shoelace æ¨£å¼
    </footer>
  </div>

  <!-- Alert Dialog -->
  <dialog id="alertDialog">
    <div class="dialog-header">
      <span class="dialog-icon"></span>
      <h6 class="dialog-title">æç¤º</h6>
    </div>
    <div class="dialog-body">
      <p class="message"></p>
    </div>
    <div class="dialog-footer">
      <sl-button variant="primary" class="btn-ok">ç¢ºå®š</sl-button>
    </div>
  </dialog>

  <!-- Confirm Dialog -->
  <dialog id="confirmDialog">
    <div class="dialog-header">
      <span class="dialog-icon">âš ï¸</span>
      <h6 class="dialog-title">ç¢ºèª</h6>
    </div>
    <div class="dialog-body">
      <p class="message"></p>
    </div>
    <div class="dialog-footer">
      <sl-button variant="neutral" class="btn-cancel">å–æ¶ˆ</sl-button>
      <sl-button variant="primary" class="btn-confirm">ç¢ºå®š</sl-button>
    </div>
  </dialog>

  <!-- Prompt Dialog -->
  <dialog id="promptDialog">
    <form method="dialog">
      <div class="dialog-header">
        <span class="dialog-icon">âœï¸</span>
        <h6 class="dialog-title">è¼¸å…¥</h6>
      </div>
      <div class="dialog-body">
        <sl-input class="prompt-input" label="" help-text=""></sl-input>
        <div class="error-message"></div>
      </div>
      <div class="dialog-footer">
        <sl-button variant="neutral" class="btn-cancel" type="button">å–æ¶ˆ</sl-button>
        <sl-button variant="primary" class="btn-confirm" type="submit">ç¢ºå®š</sl-button>
      </div>
    </form>
  </dialog>

  <!-- Custom Dialog -->
  <dialog id="customDialog">
    <div class="dialog-header">
      <span class="dialog-icon"></span>
      <h6 class="dialog-title"></h6>
    </div>
    <div class="dialog-body">
      <div class="dialog-content"></div>
    </div>
    <div class="dialog-footer"></div>
  </dialog>

  <script type="module">
    import {
      init,
      showAlert,
      showConfirm,
      showPrompt,
      showDialog
    } from './dialog-api.js';

    // Shoelace æŒ‰éˆ• variant å°ç…§
    const btnVariants = {
      primary: 'primary',
      secondary: 'neutral',
      danger: 'danger',
      success: 'success',
      warning: 'warning',
      light: 'neutral'
    };

    // Shoelace é©é…å™¨
    const shoelaceAdapter = {
      createButton: (text, style = 'secondary') => {
        const btn = document.createElement('sl-button');
        btn.variant = btnVariants[style] || 'neutral';
        if (style === 'light') {
          btn.outline = true;
        }
        btn.textContent = text;
        return btn;
      },
      setButtonStyle: (btn, style) => {
        btn.variant = btnVariants[style] || 'primary';
      },
      getInputValue: (input) => input.value,
      setInputValue: (input, value) => { input.value = value; },
      setInputPlaceholder: (input, placeholder) => { input.placeholder = placeholder; },
      setInputLabel: (label, text) => {
        // Shoelace sl-input ä½¿ç”¨ label å±¬æ€§
        if (label.tagName === 'SL-INPUT' || label.classList.contains('prompt-input')) {
          label.label = text;
        } else {
          label.textContent = text;
        }
      },
      focusInput: (input) => {
        setTimeout(() => {
          input.focus();
          if (input.select) input.select();
        }, 100);
      }
    };

    // åˆå§‹åŒ– DialogAPI
    init({
      dialogs: {
        alert: document.querySelector('#alertDialog'),
        confirm: document.querySelector('#confirmDialog'),
        prompt: document.querySelector('#promptDialog'),
        custom: document.querySelector('#customDialog')
      },
      adapter: shoelaceAdapter
    });

    // ============================================
    // ç¤ºç¯„æŒ‰éˆ•äº‹ä»¶
    // ============================================

    // Alert ç¤ºç¯„
    document.querySelector('#btnAlertSuccess').addEventListener('click', async () => {
      await showAlert('æ“ä½œå·²æˆåŠŸå®Œæˆï¼', 'success');
    });

    document.querySelector('#btnAlertError').addEventListener('click', async () => {
      await showAlert('ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚', 'error');
    });

    document.querySelector('#btnAlertInfo').addEventListener('click', async () => {
      await showAlert('é€™æ˜¯ä¸€å‰‡ç³»çµ±é€šçŸ¥è¨Šæ¯ã€‚', 'info');
    });

    // Confirm ç¤ºç¯„
    document.querySelector('#btnConfirmDelete').addEventListener('click', async () => {
      const result = await showConfirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†è³‡æ–™å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚', {
        type: 'danger',
        confirmText: 'åˆªé™¤',
        cancelText: 'å–æ¶ˆ'
      });

      if (result) {
        await showAlert('è³‡æ–™å·²æˆåŠŸåˆªé™¤', 'success');
      } else {
        await showAlert('å·²å–æ¶ˆåˆªé™¤æ“ä½œ', 'info');
      }
    });

    document.querySelector('#btnConfirmLeave').addEventListener('click', async () => {
      const result = await showConfirm('æ‚¨æœ‰æœªå„²å­˜çš„è®Šæ›´ï¼Œç¢ºå®šè¦é›¢é–‹å—ï¼Ÿ', {
        confirmText: 'é›¢é–‹',
        cancelText: 'ç•™ä¸‹'
      });

      if (result) {
        await showAlert('æ‚¨å·²é¸æ“‡é›¢é–‹', 'info');
      } else {
        await showAlert('æ‚¨é¸æ“‡ç•™ä¸‹ç¹¼çºŒç·¨è¼¯', 'success');
      }
    });

    document.querySelector('#btnConfirmCustom').addEventListener('click', async () => {
      const result = await showConfirm('è¦ä½¿ç”¨æ·±è‰²æ¨¡å¼é‚„æ˜¯æ·ºè‰²æ¨¡å¼ï¼Ÿ', {
        confirmText: 'æ·±è‰²æ¨¡å¼',
        cancelText: 'æ·ºè‰²æ¨¡å¼'
      });

      if (result) {
        await showAlert('å·²åˆ‡æ›è‡³æ·±è‰²æ¨¡å¼', 'success');
      } else {
        await showAlert('å·²åˆ‡æ›è‡³æ·ºè‰²æ¨¡å¼', 'success');
      }
    });

    // Prompt ç¤ºç¯„
    document.querySelector('#btnPromptSimple').addEventListener('click', async () => {
      const name = await showPrompt('è«‹è¼¸å…¥æ‚¨çš„åå­—ï¼š');

      if (name) {
        await showAlert(`æ­¡è¿ï¼Œ${name}ï¼`, 'success');
      } else {
        await showAlert('æ‚¨å·²å–æ¶ˆè¼¸å…¥', 'info');
      }
    });

    document.querySelector('#btnPromptDefault').addEventListener('click', async () => {
      const nickname = await showPrompt('è«‹è¼¸å…¥æš±ç¨±ï¼š', {
        defaultValue: 'åŒ¿åä½¿ç”¨è€…'
      });

      if (nickname) {
        await showAlert(`æ‚¨çš„æš±ç¨±å·²è¨­å®šç‚ºï¼š${nickname}`, 'success');
      } else {
        await showAlert('æ‚¨å·²å–æ¶ˆè¨­å®šæš±ç¨±', 'info');
      }
    });

    document.querySelector('#btnPromptValidate').addEventListener('click', async () => {
      const email = await showPrompt('è«‹è¼¸å…¥ Emailï¼š', {
        placeholder: 'example@mail.com',
        validate: (value) => {
          if (!value) return 'è«‹è¼¸å…¥ Email';
          if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
            return 'Email æ ¼å¼ä¸æ­£ç¢º';
          }
          return null;
        }
      });

      if (email) {
        await showAlert(`Email å·²è¨­å®šï¼š${email}`, 'success');
      } else {
        await showAlert('æ‚¨å·²å–æ¶ˆè¼¸å…¥ Email', 'info');
      }
    });

    // Dialog ç¤ºç¯„
    document.querySelector('#btnDialogButtons').addEventListener('click', async () => {
      const action = await showDialog('è«‹é¸æ“‡æª”æ¡ˆè™•ç†æ–¹å¼ï¼š', {
        title: 'æª”æ¡ˆæ“ä½œ',
        icon: 'ğŸ“',
        buttons: [
          { text: 'ä¸‹è¼‰', value: 'download', style: 'primary' },
          { text: 'åˆ†äº«', value: 'share', style: 'secondary' },
          { text: 'åˆªé™¤', value: 'delete', style: 'danger' },
          { text: 'å–æ¶ˆ', value: 'cancel', style: 'light' }
        ]
      });

      const actionText = {
        download: 'ä¸‹è¼‰æª”æ¡ˆ',
        share: 'åˆ†äº«æª”æ¡ˆ',
        delete: 'åˆªé™¤æª”æ¡ˆ',
        cancel: 'å–æ¶ˆæ“ä½œ'
      };

      await showAlert(`æ‚¨é¸æ“‡äº†ï¼š${actionText[action] || action}`, 'info');
    });

    document.querySelector('#btnDialogHtml').addEventListener('click', async () => {
      const result = await showDialog({
        title: 'ç”¢å“ä»‹ç´¹',
        icon: 'ğŸ§',
        html: `
          <div style="text-align: center;">
            <div style="background: var(--sl-color-neutral-100); border-radius: var(--sl-border-radius-large); padding: 1.5rem; margin-bottom: 1rem;">
              <span style="font-size: 4rem;">ğŸ§</span>
            </div>
            <h5 style="margin: 0 0 0.25rem; font-size: 1.125rem; font-weight: 600;">ç„¡ç·šè—ç‰™è€³æ©Ÿ Pro</h5>
            <p style="color: var(--sl-color-neutral-500); font-size: 0.875rem; margin: 0 0 0.5rem;">é«˜å“è³ªéŸ³æ•ˆï¼Œä¸»å‹•é™å™ªï¼ŒçºŒèˆª 24 å°æ™‚</p>
            <div style="display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 0.5rem;">
              <sl-badge variant="success">ç†±éŠ·</sl-badge>
              <sl-badge variant="warning">é™æ™‚å„ªæƒ </sl-badge>
            </div>
            <p style="font-size: 1.5rem; font-weight: 700; color: var(--sl-color-primary-600); margin: 0;">NT$ 1,299</p>
            <small style="color: var(--sl-color-neutral-400); text-decoration: line-through;">NT$ 1,999</small>
          </div>
        `,
        buttons: [
          { text: 'åŠ å…¥è³¼ç‰©è»Š', value: 'cart', style: 'primary' },
          { text: 'é—œé–‰', value: 'close', style: 'secondary' }
        ]
      });

      if (result === 'cart') {
        await showAlert('å·²åŠ å…¥è³¼ç‰©è»Šï¼', 'success');
      }
    });

    document.querySelector('#btnDialogList').addEventListener('click', async () => {
      const lang = await showDialog('è«‹é¸æ“‡èªè¨€ï¼š', {
        title: 'åˆ‡æ›èªè¨€',
        icon: 'ğŸŒ',
        type: 'list',
        options: [
          { text: 'ç¹é«”ä¸­æ–‡', value: 'zh-TW', icon: 'ğŸ‡¹ğŸ‡¼' },
          { text: 'English', value: 'en', icon: 'ğŸ‡ºğŸ‡¸' },
          { text: 'æ—¥æœ¬èª', value: 'ja', icon: 'ğŸ‡¯ğŸ‡µ' },
          { text: 'í•œêµ­ì–´', value: 'ko', icon: 'ğŸ‡°ğŸ‡·' }
        ]
      });

      if (lang) {
        const langNames = {
          'zh-TW': 'ç¹é«”ä¸­æ–‡',
          'en': 'English',
          'ja': 'æ—¥æœ¬èª',
          'ko': 'í•œêµ­ì–´'
        };
        await showAlert(`å·²åˆ‡æ›è‡³ï¼š${langNames[lang]}`, 'success');
      } else {
        await showAlert('å·²å–æ¶ˆåˆ‡æ›èªè¨€', 'info');
      }
    });

      </script>
</body>
</html>
