<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Language Switcher</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <style>
    dialog {
      border: none;
      border-radius: 0.5rem;
      padding: 0;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    dialog::backdrop {
      background: rgba(0, 0, 0, 0.5);
      animation: backdropFadeIn 0.3s ease;
    }

    dialog {
      --animate-duration: 0.3s;
    }

    dialog.dialog-closing::backdrop {
      animation: backdropFadeOut 0.3s ease forwards;
    }

    @keyframes backdropFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes backdropFadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    .list-container {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .list-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      background: white;
      cursor: pointer;
      transition: all 0.2s;
      text-align: left;
      width: 100%;
    }

    .list-item:hover {
      background: #f3f4f6;
      border-color: #3b82f6;
    }

    .list-icon {
      font-size: 1.5rem;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex flex-col items-center justify-center">

  <main class="text-center">
    <p id="greeting" class="text-gray-800 font-bold mb-8" style="font-size: 60px;">
      ä½ å¥½
    </p>

    <button
      type="button"
      id="btnSwitchLang"
      class="px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white text-lg rounded-lg shadow-md transition-colors"
    >
      åˆ‡æ›èªè¨€
    </button>
  </main>

  <!-- Custom Dialog for Language Selection -->
  <dialog id="customDialog" class="rounded-lg">
    <div class="dialog-header flex items-center gap-3 px-4 pt-4 pb-2">
      <span class="dialog-icon text-2xl"></span>
      <h6 class="dialog-title text-lg font-semibold text-gray-800"></h6>
    </div>
    <div class="dialog-body px-4 pb-4">
      <div class="dialog-content"></div>
    </div>
    <div class="dialog-footer flex justify-end gap-2 px-4 py-3 bg-gray-50 border-t border-gray-200"></div>
  </dialog>

  <script type="module">
    import { init, showDialog } from './dialog-api.js';

    // Tailwind æŒ‰éˆ•æ¨£å¼
    const btnStyles = {
      primary: 'px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors',
      secondary: 'px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-md transition-colors',
    };

    // Tailwind é©é…å™¨
    const tailwindAdapter = {
      createButton: (text, style = 'secondary') => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = text;
        btn.className = btnStyles[style] || btnStyles.secondary;
        return btn;
      },
      setButtonStyle: (btn, style) => {
        btn.className = 'btn-confirm ' + (btnStyles[style] || btnStyles.primary);
      },
      getInputValue: (input) => input.value,
      setInputValue: (input, value) => { input.value = value; },
      setInputPlaceholder: (input, placeholder) => { input.placeholder = placeholder; },
      setInputLabel: (label, text) => { label.textContent = text; },
      focusInput: (input) => {
        input.focus();
        if (input.select) input.select();
      }
    };

    // åˆå§‹åŒ– DialogAPI
    init({
      dialogs: {
        custom: document.querySelector('#customDialog')
      },
      adapter: tailwindAdapter
    });

    // èªè¨€å°ç…§è¡¨
    const greetings = {
      'zh': 'ä½ å¥½',
      'en': 'Hello',
      'ja': 'ã“ã‚“ã«ã¡ã¯',
      'de': 'Hallo',
      'it': 'Ciao',
      'fr': 'Bonjour'
    };

    // åˆ‡æ›èªè¨€æŒ‰éˆ•
    document.querySelector('#btnSwitchLang').addEventListener('click', async () => {
      const lang = await showDialog('è«‹é¸æ“‡èªè¨€ï¼š', {
        title: 'åˆ‡æ›èªè¨€',
        icon: 'ğŸŒ',
        type: 'list',
        options: [
          { text: 'ä¸­æ–‡', value: 'zh', icon: 'ğŸ‡¹ğŸ‡¼' },
          { text: 'English', value: 'en', icon: 'ğŸ‡ºğŸ‡¸' },
          { text: 'æ—¥æœ¬èª', value: 'ja', icon: 'ğŸ‡¯ğŸ‡µ' },
          { text: 'Deutsch', value: 'de', icon: 'ğŸ‡©ğŸ‡ª' },
          { text: 'Italiano', value: 'it', icon: 'ğŸ‡®ğŸ‡¹' },
          { text: 'FranÃ§ais', value: 'fr', icon: 'ğŸ‡«ğŸ‡·' }
        ]
      });

      if (lang && greetings[lang]) {
        document.querySelector('#greeting').textContent = greetings[lang];
      }
    });
  </script>
</body>
</html>
